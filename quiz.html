<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Murgrip MCQ</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <!-- AdMob Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-2717898931409989" crossorigin="anonymous"></script>
    <!-- Custom CSS -->
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Arial', sans-serif;
            text-align: center;
            padding-top: 50px;
            transition: 0.3s;
        }

        .neon-text {
            font-size: 32px;
            font-weight: bold;
            text-transform: uppercase;
            text-shadow: 0 0 5px #ff0, 0 0 10px #ff0;
        }

        .quiz-box {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff0;
            box-shadow: 0 0 15px #ff0;
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            max-width: 500px;
            height: 250px;
            margin: 0 auto;
            overflow-y: auto;
            font-size: 18px;
            line-height: 1.6;
        }

        .neon-button {
            background: transparent;
            border: 2px solid #ff0;
            color: #ff0;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease-in-out;
            text-shadow: 0 0 5px #ff0, 0 0 10px #ff0;
        }

        .option {
            display: block;
            margin: 10px auto;
            padding: 10px;
            border: 2px solid #ff0;
            color: #ff0;
            background: transparent;
            border-radius: 5px;
            width: 90%;
        }

        .correct { background-color: green !important; color: white !important; }
        .incorrect { background-color: red !important; color: white !important; }

        #show-answer-btn { display: none; margin-top: 10px; }
        #correct-answer { display: none; margin-top: 10px; font-weight: bold; color: #0f0; }

        /* Scoreboard */
        .scoreboard {
            margin-top: 20px;
            font-size: 18px;
            padding: 10px;
            border-radius: 5px;
            border: 2px solid #ff0;
            box-shadow: 0 0 10px #ff0;
            display: inline-block;
        }

        /* Light Mode */
        .light-mode {
            background-color: #fff;
            color: #000;
        }

        .light-mode .quiz-box, .light-mode .neon-button, .light-mode .option, .light-mode .scoreboard {
            border: 2px solid #000;
            box-shadow: none;
            color: #000;
            text-shadow: none;
        }
        .light-mode .quiz-box,.light-mode .option{
          color:#fff;
        }

        .light-mode .option:hover { background: #000; color: #fff; }

        /* Banner Ad */
        #banner-ad {
            position: fixed;
            bottom: 0;
            width: 100%;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
        }
    </style>
</head>
<body>

    <h1 class="neon-text" id="title">Murgrip MCQ</h1>

    <button class="neon-button" onclick="window.location.href='view.html'">Back to Tools Library</button>

    <div class="scoreboard">
        ✅ Correct: <span id="correct-score">0</span> |
        ❌ Wrong: <span id="wrong-score">0</span>
    </div>
    <br><br>

    <div id="quiz-box" class="quiz-box">Click the button to generate a question!
    <button id="show-answer-btn" class="neon-button" onclick="showAnswer()">Show Answer</button>
    
    <div id="correct-answer"></div>
    </div>
    <br>

    <button class="neon-button" onclick="generateQuestion()">Get a Question</button>
    
    

    <!-- Banner Ad -->
    <div id="banner-ad">
        <ins class="adsbygoogle"
            style="display:inline-block;width:320px;height:50px"
            data-ad-client="ca-app-pub-2717898931409989"
            data-ad-slot="5016082019"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <script>
        let correctAnswer = "";
        let correctScore = parseInt(localStorage.getItem("correctScore")) || 0;
        let wrongScore = parseInt(localStorage.getItem("wrongScore")) || 0;
        document.getElementById("correct-score").innerText = correctScore;
        document.getElementById("wrong-score").innerText = wrongScore;

        async function generateQuestion() {
            let quizBox = document.getElementById("quiz-box");
            quizBox.innerHTML = `<strong>Generating question...</strong>`;
            document.getElementById("show-answer-btn").style.display = "none";
            document.getElementById("correct-answer").style.display = "none";

            try {
                const response = await fetch("https://opentdb.com/api.php?amount=1&type=multiple");
                const data = await response.json();
                const questionData = data.results[0];

                let questionText = questionData.question;
                correctAnswer = questionData.correct_answer;
                let options = [...questionData.incorrect_answers, correctAnswer];

                options.sort(() => Math.random() - 0.5);

                quizBox.innerHTML = `<strong>${questionText}</strong><br><br>`;

                options.forEach(option => {
                    let optionBtn = document.createElement("button");
                    optionBtn.classList.add("option");
                    optionBtn.innerHTML = option;
                    optionBtn.onclick = function() {
                        if (option === correctAnswer) {
                            optionBtn.classList.add("correct");
                            updateScore("correct");
                        } else {
                            optionBtn.classList.add("incorrect");
                            document.getElementById("show-answer-btn").style.display = "block";
                            updateScore("wrong");
                        }
                        disableOptions();
                        showInterstitialAd("ca-app-pub-2717898931409989/2593964622");
                    };
                    quizBox.appendChild(optionBtn);
                });
            } catch (error) {
                quizBox.innerText = "Oops! Couldn't fetch a question. Try again! \n Internet error!";
                console.error("Error fetching question:", error);
            }
        }

        function disableOptions() {
            let buttons = document.querySelectorAll(".option");
            buttons.forEach(btn => btn.disabled = true);
        }

        function showAnswer() {
            let answerBox = document.getElementById("correct-answer");
            answerBox.innerHTML = `Correct Answer: <span>${correctAnswer}</span>`;
            answerBox.style.display = "block";
            document.getElementById("show-answer-btn").style.display = "none";
        }

        function updateScore(type) {
            if (type === "correct") {
                correctScore++;
                localStorage.setItem("correctScore", correctScore);
                document.getElementById("correct-score").innerText = correctScore;
            } else {
                wrongScore++;
                localStorage.setItem("wrongScore", wrongScore);
                document.getElementById("wrong-score").innerText = wrongScore;
            }
        }

        function showInterstitialAd(adUnit) {
            if (window.admob) {
                admob.interstitial.load({ adUnitId: adUnit }).then(() => {
                    admob.interstitial.show();
                }).catch(() => {});
            }
        }

        function setupRandomInterstitial() {
            let delay = Math.floor(Math.random() * (120 - 60 + 1) + 60) * 1000;
            setTimeout(() => {
                showInterstitialAd("ca-app-pub-2717898931409989/2830269352");
                setupRandomInterstitial();
            }, delay);
        }

        window.onload = () => {
            setupRandomInterstitial();
        };
    </script>
</body>
</html>
